<ngx-spinner bdColor="rgba(51,51,51,0.8)" size="medium" color="#fff" type="square-jelly-box">
  <p class="d-inline-block text-primary text-uppercase border-bottom border-5"
    style="border-color: rgba(256, 256, 256, .3) !important;">Addiciton Cure</p>

</ngx-spinner>

<!-- Layout wrapper -->
<div class="layout-wrapper layout-content-navbar">
  <div class="layout-container">
    <!-- Layout container -->
    <div class="layout-page">
      <app-home-header></app-home-header>
      <!-- Content wrapper -->
      <br>
      <div class="content-wrapper">
        <!-- Content -->
        <div class="container-xxl flex-grow-1 container-p-y">
          <div class="card mb-4">
            <h2 class="card-header" style="margin: 0 0 0px;">Profile Details</h2>
            <!-- Account -->
            <div class="card-body">
              <h1 class="title" style="text-align: center;">
                <span class="title-word title-word-1">Your Addiciton : </span>
                <span class="title-word title-word-2">{{this.sharedservice.PatientById.categoryname}}</span>
              </h1>
              <div class="d-flex align-items-start align-items-sm-center gap-4">
                <div *ngIf="this.sharedservice.PatientById.imagename!=null">

                  <img src="../../../assets/images/{{this.sharedservice.PatientById.imagename}}" alt="user-avatar"
                    class="d-block rounded" height="100" width="100" id="uploadedAvatar" />


                </div>
                <div *ngIf="this.sharedservice.PatientById.imagename==null">

                  <img src="../../../assets/images/th (2).png" alt="user-avatar" class="d-block rounded" height="100"
                    width="100" id="uploadedAvatar" />


                </div>

                <div class="button-wrapper">
                  <label for="upload" class="btn btn-primary me-2 mb-4" tabindex="0">
                    <span class="d-none d-sm-block">Edit Picture</span>
                    <i class="bx bx-upload d-block d-sm-none"></i>
                    <input formControlName="imagename" type="file" id="upload" class="account-file-input" hidden
                      accept="image/*" #File required (change)="UploadImage(File)" />
                  </label>
                </div>
              </div>
              <div class="button-wrapper" style="text-align: right;">

                <div *ngIf="this.sharedservice.requestBypat!=null">
                  <div *ngIf="this.sharedservice.requestBypat.status==0">
                    <button style="margin-top: -3%;" type="button" disabled="true" class="btn btn-primary me-2"
                      routerLink="/request">Please wait
                      doctor response</button>
                  </div>
                </div>
             
                <button *ngIf="this.sharedservice.requestBypat==null &&this.adminService.PaymentsbyPatid!=null"  type="button" class="btn btn-primary me-2" routerLink="/request">Doctors Request</button>
                <button *ngIf="this.adminService.PaymentsbyPatid==null" (click)="OpenDialog()"  type="button" class="btn btn-primary me-2">Pay</button>
                <button type="button" class="btn btn-primary me-2" routerLink="/result">Treatment Periods and
                  Result</button>
              </div>
            </div>

            <hr class="my-0" />
            <div class="card-body">
              <form [formGroup]="UpdateProfile">
                <div class="row">
                  <div class="mb-3 col-md-6">
                    <label for="firstName" class="form-label">First Name</label>
                    <input formControlName="firstname" class="form-control" type="text" autofocus
                      placeholder="First Name" />
                  </div>
                  <div class="mb-3 col-md-6">
                    <label for="lastName" class="form-label">Last Name</label>
                    <input formControlName="lastname" class="form-control" type="text" placeholder="Last Name" />
                  </div>
                  <div class="mb-3 col-md-6">
                    <label for="UserName" class="form-label">User Name</label>
                    <input formControlName="username" class="form-control" type="text" (click)="ShowBErrorMessage()"
                      placeholder="User Name" />
                    <small *ngIf="UpdateProfile.controls['username'].hasError('required') && B == true">
                      User Name is <strong>required</strong>
                    </small>
                  </div>
                  <div class="mb-3 col-md-6">
                    <label for="email" class="form-label">E-mail</label>
                    <input formControlName="email" class="form-control" type="email" placeholder="Email@example.com"
                      readonly />
                  </div>
                  <div class="mb-3 col-md-6">
                    <label for="password" class="form-label" > Current Password</label>
                    <input class="form-control"  type="password" id="password" name="password" formControlName="CurrentPassword" (change)="CheckPassword()"
                      placeholder="Password"  />
                     
                  </div>
                  <div class="mb-3 col-md-6">
                    <label for="email" class="form-label">Password</label>
                    <input formControlName="password" class="form-control" type="password" placeholder="Password"  [readOnly]="Current"
                      (click)="ShowCErrorMessage()" />
                    <small *ngIf="UpdateProfile.controls['password'].hasError('required') && C == true">
                      Password is <strong>required</strong>
                    </small>
                    <small *ngIf="UpdateProfile.controls['password'].hasError('minlength') && C == true">
                      must contains at least <strong>6 characters</strong>
                    </small>
                  </div>


                </div>
                <div class="mt-2">
                  <button type="submit" class="btn btn-primary me-2" [disabled]="UpdateProfile.invalid"
                    (click)="UpdatePatient()">Save changes</button>
                  <button class="btn btn-outline-secondary" (click)="ReturnOldValue()">Cancel</button>
                </div>
              </form>
            </div>
            <!-- /Account -->
          </div>


        </div>
      </div>
    </div>

    <!-- / Content -->

    <div class="content-backdrop fade">
    </div>
  </div>

  <!-- Content wrapper -->
</div>
<!-- / Layout page -->

<app-home-footer></app-home-footer>
<!-- Overlay -->
<div class="layout-overlay layout-menu-toggle"></div>

<!-- / Layout wrapper -->